#!/usr/bin/env bash

# name=HEAD
# if [ -n "$1" ]; then
#   name="$1"
# fi
out=$(git log --color=always --reverse --oneline "$(git merge-base "$(git symbolic-ref refs/remotes/origin/HEAD --short)" HEAD)"..HEAD)
# if [ "$num_commits" != "0" ]; then
echo "$out" | awk '{printf "\033[2m%2d\033[0m %s\n", NR, $0}'
echo
num_commits="$(echo "$out" | wc -l)"
if [ -z $NO_STAT ]; then
	git diff "$(git merge-base "$(git symbolic-ref refs/remotes/origin/HEAD --short)" HEAD)"..HEAD --stat | tail -1 | xargs
fi
# git diff --color=always --reverse --oneline "$(git merge-base "$(git symbolic-ref refs/remotes/origin/HEAD --short)" HEAD)"..HEAD --stat
